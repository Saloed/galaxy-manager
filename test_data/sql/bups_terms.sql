SELECT STUFF((
SELECT CAST(','+ CONVERT(VARCHAR(2),Semestr.F$SEMESTER) AS VARCHAR(MAX))
FROM t$U_CURR_DISCONTENT DisCont
LEFT OUTER
JOIN t$U_Curr_Semester Semestr ON DisCont.F$CSEMESTER = Semestr.F$NREC
INNER JOIN t$U_TYPEWORK TypeWork ON DisCont.f$cTypeWork = TypeWork.F$NREC AND (TypeWork.F$WTYPE = 4 OR TypeWork.F$WTYPE = 23)
WHERE
DisCont.f$CCURR_DIS = CONVERT(BINARY(8), CONVERT(BIGINT,0x8000000000000000)+ CONVERT(BIGINT, %s)) FOR XML PATH ('')
),1,1,'') AS exam,
 STUFF((
SELECT CAST(','+ CONVERT(VARCHAR(2),Semestr.F$SEMESTER) AS VARCHAR(MAX))
FROM t$U_CURR_DISCONTENT DisCont
LEFT OUTER
JOIN t$U_Curr_Semester Semestr ON DisCont.F$CSEMESTER = Semestr.F$NREC
INNER JOIN t$U_TYPEWORK TypeWork ON DisCont.f$cTypeWork = TypeWork.F$NREC AND TypeWork.F$WTYPE = 5
WHERE
DisCont.f$CCURR_DIS = CONVERT(BINARY(8), CONVERT(BIGINT,0x8000000000000000)+ CONVERT(BIGINT, %s)) FOR XML PATH ('')
),1,1,'') AS test,
 STUFF((
SELECT DISTINCT CAST(','+ CONVERT(VARCHAR(2),Semestr.F$SEMESTER) AS VARCHAR(MAX))
FROM t$U_CURR_DISCONTENT DisCont
LEFT OUTER
JOIN t$U_Curr_Semester Semestr ON DisCont.F$CSEMESTER = Semestr.F$NREC
LEFT JOIN t$U_TYPEWORK TypeWork ON DisCont.f$cTypeWork = TypeWork.F$NREC
WHERE
DisCont.f$CCURR_DIS = CONVERT(BINARY(8), CONVERT(BIGINT,0x8000000000000000)+ CONVERT(BIGINT, %s)) FOR XML PATH ('')
),1,1,'') AS sem
